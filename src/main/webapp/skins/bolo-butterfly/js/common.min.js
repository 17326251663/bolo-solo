import"../../../js/common";function timeSeriesReload(e){1==e?$("#archives span.al_mon").click((function(){return $(this).next().slideToggle(400),!1})):function(){$("#al_expand_collapse,#archives span.al_mon").css({cursor:"pointer"}),$("#archives span.al_mon").each((function(){var e=$(this).next().children("li").length;$(this).children("#post-num").text(e)}));var e=$("#archives ul.al_post_list"),t=$("#archives ul.al_post_list:first");e.hide(1,(function(){t.show()})),$("#archives span.al_mon").click((function(){return $(this).next().slideToggle(400),!1})),document.body.clientWidth>860&&$("#archives li.al_li").mouseover((function(){return $(this).children(".al_post_list").show(400),!1}));var n=0;$("#al_expand_collapse").click((function(){0==n?(e.show(),n++):1==n&&(e.hide(),n--)}))}()}function loadBg(){window.cnblogsConfig={homeTopImg:["https://img.lonuslan.com/lonuslan/20200120/AXsi94kr5YSl.jpg","https://img.lonuslan.com/lonuslan/20200120/o6RVlf8Tym1S.jpg","https://img.lonuslan.com/lonuslan/20200120/4Xw4pJJ6wA7X.jpg","https://img.lonuslan.com/lonuslan/20200120/d4yH2omtFThg.jpg","https://img.lonuslan.com/lonuslan/20200120/QOBHhXHWcgBu.jpg","https://img.lonuslan.com/lonuslan/20200120/XznCEJWcH0oG.jpg","https://img.lonuslan.com/lonuslan/20200120/G0pKoHpLTSqp.jpg","https://img.lonuslan.com/lonuslan/20200120/9P2HW1O4DSNl.jpg","https://img.lonuslan.com/lonuslan/20200120/IRiGYHISNvks.jpg"]};let e,t=window.cnblogsConfig.homeTopImg;e=t.length>0?t.length>1?t[randomNumBetween(0,t.length-1)]:t[0]:"",$(".full_page").css({background:"#222 url("+e+")  center center no-repeat","background-size":"cover"})}function randomNumBetween(e,t){return Math.floor(Math.random()*(t-e)+e)}timeSeriesReload(!1),window.Skin={init:function(){var e,t,n=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#000")},o=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#fff")},i=function(e){const t=("; "+document.cookie).split(`; ${e}=`);if(2===t.length)return t.pop().split(";").shift()}("theme");t=(e=(new Date).getHours())<=6||e>=18,void 0===i?t?n():o():"light"===i?o():n();window.addEventListener("load",(function(){loadScript("https://sdk.jinrishici.com/v2/browser/jinrishici.js",(function(){jinrishici.load((function(e){var t=0=="May the god bless you.,It is better to burn out than to fade away.".length?new Array:"May the god bless you.,It is better to burn out than to fade away.".split(","),n=e.data.content;t.unshift(n),new Typed("#subtitle",{strings:t,startDelay:300,typeSpeed:150,loop:!0,backSpeed:50})}))}))}));const s=void 0!==GLOBAL_CONFIG.Snackbar,a=$("#nav"),l=$("#rightside"),c=$("body");var r=$("#blog_name").width(),d=$(".menus").width(),h=$("#sidebar").width();function m(e){var t;1===e?t=r+d>a.width()-h-20:2===e&&(t=r+d>a.width()-20),t?u():(a.find(".toggle-menu").removeClass("is-visible-inline"),a.find(".menus_items").removeClass("is-invisible"),a.find("#search_button span").removeClass("is-invisible"))}function u(){a.find(".toggle-menu").addClass("is-visible-inline"),a.find(".menus_items").addClass("is-invisible"),a.find("#search_button span").addClass("is-invisible")}function f(){window.innerWidth<768?u():m(2)}f(),$("#nav").css({opacity:"1",animation:"headerNoOpacity 1s"}),$(window).on("resize",(function(){$("#sidebar").hasClass("tocOpenPc")&&a.hasClass("fixed")?m(1):f()}));var p=$(".toggle-menu"),g=$("#mobile-sidebar-menus"),w=$("#mobile-toc-button"),v=$("#menu_mask");function b(e){if(sidebarPaddingR(),$("body").css("overflow","hidden"),v.fadeIn(),"menu"===e){p.removeClass("close").addClass("open"),g.css("transform","translate3d(-100%,0,0)");var t=g.children();for(let e=0;e<=t.length;e++){const n=e/5+.2;t.eq(e).css("animation","sidebarItem "+n+"s")}}"toc"===e&&(w.removeClass("close").addClass("open"),$("#sidebar").addClass("tocOpenMobile"),$("#sidebar").css({transform:"translate3d(-100%,0,0)",left:""}))}function _(e){$("body").css({overflow:"","padding-right":""}),v.fadeOut(),"menu"===e&&(p.removeClass("open").addClass("close"),g.css("transform",""),$("#mobile-sidebar-menus > div,#mobile-sidebar-menus > hr").css("animation","")),"toc"===e&&(w.removeClass("open").addClass("close"),$("#sidebar").removeClass("tocOpenMobile"),$("#sidebar").css({transform:""}))}p.on("click",(function(){b("menu")})),w.on("click",(function(){b("toc")})),v.on("click touchstart",(function(e){p.hasClass("open")&&_("menu"),w.hasClass("open")&&_("toc")})),$(window).on("resize",(function(e){p.is(":visible")||p.hasClass("open")&&_("menu")})),window.matchMedia("(max-width: 1024px)").addListener((function(e){e.matches?$("#sidebar").hasClass("tocOpenPc")&&closeSidebar():($("#toggle-sidebar").hasClass("on")&&openSidebar(),w.hasClass("open")&&_("toc"))})),$("#scroll_down").on("click",(function(){scrollToDest("#content-inner")})),$("#bookmark-it").on("click",(function(){if(window.sidebar&&window.sidebar.addPanel)window.sidebar.addPanel(document.title,window.location.href,"");else if(window.external&&"AddFavorite"in window.external)window.external.AddFavorite(location.href,document.title);else{if(window.opera&&window.print)return this.title=document.title,!0;if(s){var e=GLOBAL_CONFIG.Snackbar.bookmark.message_prev+" "+(-1!==navigator.userAgent.toLowerCase().indexOf("mac")?"Command/Cmd":"CTRL")+"+ D "+GLOBAL_CONFIG.Snackbar.bookmark.message_next+".";snackbarShow(e)}else alert(GLOBAL_CONFIG.bookmark.message_prev+" "+(-1!==navigator.userAgent.toLowerCase().indexOf("mac")?"Command/Cmd":"CTRL")+"+ D "+GLOBAL_CONFIG.bookmark.message_next+".")}}));var C=0,k=!0,y="function"==typeof chatBtnHide,S="function"==typeof chatBtnShow;if($(window).scroll(throttle((function(e){var t=$(this).scrollTop(),n=function(e){var t=e>C;return C=e,t}(t);t>56?(n?(a.hasClass("visible")&&a.removeClass("visible"),S&&!0===k&&(chatBtnHide(),k=!1)):(a.hasClass("visible")||a.addClass("visible"),y&&!1===k&&(window.chatBtnShow(),k=!0)),a.addClass("fixed"),"0"===l.css("opacity")&&l.css({opacity:"1",transform:"translateX(-38px)"})):(0===t&&a.removeClass("fixed").removeClass("visible"),l.css({opacity:"",transform:""}))}),200)),$(".body-index")[0]?($("#readmode").hide(),$("#to_comment").hide(),$("#font_plus").hide(),$("#font_minus").hide()):($("#readmode").show(),$("#to_comment").show(),$("#font_plus").show(),$("#font_minus").show()),$("#go-up").on("click",(function(){scrollToDest("body")})),GLOBAL_CONFIG_SITE.isPost&&GLOBAL_CONFIG_SITE.isSidebar){$(".toc-child").hide(),$(window).scroll(throttle((function(e){var t=$(this).scrollTop();T(t),L(t),A(t)}),100)),$(".toc-link").on("click",(function(e){window.innerWidth<=1024?_("toc"):(e.preventDefault(),scrollToDest($(this).attr("href")))}));var T=function(e){var t=$("#article-container").height(),n=$(window).height(),o=e/(t>n?t-n:$(document).height()-n),i=Math.round(100*o),s=i>100?100:i<=0?0:i;$(".progress-num").text(s),$(".sidebar-toc__progress-bar").animate({width:s+"%"},100)},O=GLOBAL_CONFIG.isanchor,L=function(e){if(0===$(".toc-link").length)return!1;var t=$("#article-container").find("h1,h2,h3,h4,h5,h6"),n="";t.each((function(){var t=$(this);e>t.offset().top-25&&(n="#"+$(this).attr("id"))})),""===n&&($(".toc-link").removeClass("active"),$(".toc-child").hide());var o,i,s=$(".toc-link.active");if(n&&s.attr("href")!==n){O&&(i=n,window.history.replaceState&&i!==window.location.hash&&window.history.replaceState(void 0,void 0,i)),$(".toc-link").removeClass("active");var a=$('.toc-link[href="'+n+'"]');a.addClass("active");var l=a.parents(".toc-child"),c=l.length>0?l.last():a;(o=c.closest(".toc-item").find(".toc-child")).is(":visible")||o.fadeIn(400),c.closest(".toc-item").siblings(".toc-item").find(".toc-child").hide()}},A=function(e){if($(".toc-link").hasClass("active")){var t=$(".active").offset().top,n=$("#sidebar .sidebar-toc__content").scrollTop();t>e+$(window).height()-100&&$("#sidebar .sidebar-toc__content").scrollTop(n+100),t<e+100&&$("#sidebar .sidebar-toc__content").scrollTop(n-100)}}}$("#readmode").click((function(){$("body").toggleClass("read-mode")})),$("#font_plus").click((function(){c.css("font-size",parseFloat(c.css("font-size"))+1)})),$("#font_minus").click((function(){c.css("font-size",parseFloat(c.css("font-size"))-1)})),$("#mobile-sidebar-menus .menus-expand").on("click",(function(){$(this).hasClass("menus-closed")?($(this).parents(".menus_item").find(".menus_item_child").slideDown(),$(this).removeClass("menus-closed")):($(this).parents(".menus_item").find(".menus_item_child").slideUp(),$(this).addClass("menus-closed"))})),$(window).on("touchmove",(function(e){var t=$("#nav .menus_item_child");t.is(":visible")&&t.css("display","none")})),$("#rightside_config").on("click",(function(){$("#rightside-config-hide").hasClass("rightside-in")?$("#rightside-config-hide").removeClass("rightside-in").addClass("rightside-out"):$("#rightside-config-hide").removeClass("rightside-out").addClass("rightside-in")})),$("#darkmode").click((function(){"light"==("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?(n(),Cookies.set("theme","dark",2),s&&snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(o(),Cookies.set("theme","light",2),s&&snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)),"function"==typeof utterancesTheme&&utterancesTheme()}))},initArticle:function(){page.share(),initCanvas("articleTop"),$(window).width()>=768?$(".post__toc").css({left:document.querySelector(".article__content").getBoundingClientRect().right+20,right:"auto",display:"block"}):$(".side__top--toc").click((function(){$(".post__toc").slideToggle()}));var e=$(".vditor-reset [id^=toc_h]"),t=$(".article__toc");t.find("a").click((function(e){var t=$(this).attr("href");return window.location.hash=t,$(window).scrollTop($(t).offset().top),$(window).width()<768&&$(".post__toc").slideToggle(),e.preventDefault(),e.stopPropagation(),!1})),$("#to_comment").click((function(){var e=$(".commentFont").offset().top;$("body,html").animate({scrollTop:e},1e3)})),$(window).scroll((function(n){if(0===$(".article__toc li").length)return!1;var o=[];e.each((function(e){o.push({id:this.id,offsetTop:$(this).offset().top})}));for(var i=$(window).scrollTop()+10,s=0,a=o.length;s<a;s++)if(i<o[s].offsetTop){t.find("li").removeClass("current");var l=s>0?s-1:0;t.find('a[href="#'+o[l].id+'"]').parent().addClass("current");break}i>=o[o.length-1].offsetTop&&(t.find("li").removeClass("current"),t.find("li:last").addClass("current"))})),$(window).scroll()}},$(document).ready((function(){Skin.init()})),loadBg(),leftRight();